version: 1
type: pipeline-template

name: Kubernetes Docker Builder 
description: Implementation of a Kaniko parametrized pipeline
parameters:
  - name: GITLAB_CREDENTIAL
    displayName: Gitlab Credential
    description: Use http(s) username/password for http(s) git protocol
    type: credentials
  - name: docker_registry
    type: string
    displayName: Docker Registry to upload
  - name: docker_image
    type: string
    displayName: Docker Image name
  - name: docker_tag
    type: string
    displayName: Docker Image tag
multibranch:
  branchSource:
    github:
        repoOwner: carlosrodlop
        repository: ${repoName}
        credentialsId: my-team-github-credentials